@tailwind base;
@tailwind components;
@tailwind utilities;

/* === Theme tokens === */
:root {
  /* Backgrounds */
  --color-bg:           #fdfaec;   /* gold-50 */
  --color-bg-secondary: #F4FDAF;   /* lime-100 */
  --color-bg-accent:    #FAB2EA;   /* blush-200 */
  --color-bg-muted:     #faf3cf;   /* gold-100 */

  /* Text */
  --color-text:           #013C1A; /* forest-900 */
  --color-text-secondary: #065c2c; /* forest-700 */
  --color-text-muted:     #097438; /* forest-600 */

  /* Interactive / accent */
  --color-accent:       #360568;   /* indigo-800 */
  --color-accent-hover: #4c0a7d;   /* indigo-700 */

  /* Borders */
  --color-border: #c0e6d3;        /* forest-100 */

  /* Surfaces (cards, etc.) */
  --color-surface:       #ffffff;
  --color-surface-hover: #EFDD8D;  /* gold-200 */

  /* Tags */
  --color-tag-bg:   #fdd9f5;      /* blush-100 */
  --color-tag-text: #360568;      /* indigo-800 */

  /* Gradients */
  --gradient-warm: linear-gradient(135deg, #EFDD8D, #F4FDAF, #FAB2EA);
  --gradient-deep: linear-gradient(135deg, #360568, #013C1A);

  /* Glow (neon accent — subtle in light mode) */
  --color-glow: #cc9326;
}

.dark {
  /* Backgrounds */
  --color-bg:           #00260f;   /* forest-950 */
  --color-bg-secondary: #001a0a;   /* deeper forest */
  --color-bg-accent:    #360568;   /* indigo-800 */
  --color-bg-muted:     #044922;   /* forest-800 */

  /* Text */
  --color-text:           #fdfaec; /* gold-50 — white-ish */
  --color-text-secondary: #EFDD8D; /* gold-200 */
  --color-text-muted:     #c0e6d3; /* forest-100 */

  /* Interactive / accent */
  --color-accent:       #FAB2EA;   /* blush-200 */
  --color-accent-hover: #f687dd;   /* blush-300 */

  /* Borders */
  --color-border: #065c2c;        /* forest-700 */

  /* Surfaces (cards, etc.) */
  --color-surface:       #044922;  /* forest-800 */
  --color-surface-hover: #260349;  /* indigo-900 */

  /* Tags */
  --color-tag-bg:   #260349;      /* indigo-900 */
  --color-tag-text: #FAB2EA;      /* blush-200 */

  /* Gradients */
  --gradient-warm: linear-gradient(135deg, #7c6212, #62770c, #961579);
  --gradient-deep: linear-gradient(135deg, #4c0a7d, #065c2c);

  /* Glow (neon accent — comes alive in dark mode) */
  --color-glow: #ffb830;
}

@layer base {
  body {
    @apply bg-bg text-text antialiased;
    position: relative;
  }

  /* Organic noise texture overlay — inline SVG data URI, works everywhere */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    opacity: 0.15;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
    background-size: 300px 300px;
    mix-blend-mode: multiply;
  }

  /* Subtle depth gradient — angled, not radial */
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    background: linear-gradient(
      160deg,
      transparent 0%,
      transparent 30%,
      rgba(0, 0, 0, 0.06) 70%,
      rgba(0, 0, 0, 0.12) 100%
    );
  }

  .dark body::after {
    background: linear-gradient(
      160deg,
      rgba(255, 255, 255, 0.02) 0%,
      transparent 30%,
      transparent 60%,
      rgba(0, 0, 0, 0.15) 100%
    );
  }

  /* Content sits above the texture layers */
  body > * {
    position: relative;
    z-index: 1;
  }

  /* Prose styling for content pages */
  .prose {
    @apply max-w-none;
  }

  .prose h1 {
    @apply text-3xl font-bold mb-6 mt-8;
  }

  .prose h2 {
    @apply text-2xl font-semibold mb-4 mt-6;
  }

  .prose h3 {
    @apply text-xl font-semibold mb-3 mt-5;
  }

  .prose p {
    @apply mb-4 leading-relaxed;
  }

  .prose ul, .prose ol {
    @apply mb-4 pl-6;
  }

  .prose li {
    @apply mb-2;
  }

  .prose ul li {
    @apply list-disc;
  }

  .prose ol li {
    @apply list-decimal;
  }

  .prose a {
    @apply text-accent underline hover:text-accent-hover;
  }

  .prose blockquote {
    @apply border-l-4 border-accent pl-4 italic my-4 text-text-secondary;
  }

  .prose code {
    @apply bg-bg-muted px-1.5 py-0.5 rounded text-sm;
  }

  .prose pre {
    @apply bg-forest-950 text-gold-50 p-4 rounded-lg overflow-x-auto my-4;
  }

  .prose pre code {
    @apply bg-transparent p-0;
  }

  .prose img {
    @apply rounded-lg my-6;
  }

  .prose hr {
    @apply my-8 border-border;
  }
}

/* === Page transition — gentle fade === */
@keyframes fade-in {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes fade-out {
  from { opacity: 1; }
  to   { opacity: 0; }
}
::view-transition-old(root) {
  animation: fade-out 400ms ease-out;
}
::view-transition-new(root) {
  animation: fade-in 400ms ease-in;
}

/* === Neon glow utilities === */
/* Use on interactive elements: hover, focus, active states only */
@layer utilities {
  .glow-sm {
    box-shadow: 0 0 10px 2px var(--color-glow, #ffb830);
  }
  .glow {
    box-shadow: 0 0 20px 4px var(--color-glow, #ffb830);
  }
  .glow-lg {
    box-shadow: 0 0 32px 8px var(--color-glow, #ffb830);
  }
  .glow-text {
    text-shadow: 0 0 8px var(--color-glow, #ffb830), 0 0 20px var(--color-glow, #ffb830);
  }
  .glow-text-subtle {
    text-shadow: 0 0 6px var(--color-glow, #ffb830);
  }
}

/* === Interactive glow on hover/focus === */
/* Links, buttons, and cards get a neon glow on interaction */
@layer components {
  /* Nav links and prose links */
  a:hover, a:focus-visible, a:active {
    text-shadow: 0 0 8px var(--color-glow, #ffb830), 0 0 20px var(--color-glow, #ffb830);
  }

  /* Cards and bordered interactive elements */
  a.group {
    transition: box-shadow 600ms ease;
  }
  a.group:hover, a.group:focus-visible, a.group:active {
    box-shadow: 0 0 32px 6px var(--color-glow, #ffb830);
    text-shadow: none;
  }

  /* Buttons */
  button:hover, button:focus-visible, button:active {
    box-shadow: 0 0 12px 2px var(--color-glow, #ffb830);
  }
}
