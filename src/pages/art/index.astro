---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const base = import.meta.env.BASE_URL.replace(/\/$/, '');

const art = (await getCollection('art', ({ data }) => data.published))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Art â€” Audrey Evergreene">
  <h1 class="text-3xl font-bold mb-8">Art</h1>

  {art.length === 0 ? (
    <p class="text-text-secondary">
      Art is on its way. Check back soon!
    </p>
  ) : (
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      {art.map((piece) => (
        <a href={`${base}/art/${piece.slug}/`} class="group block rounded-lg border border-border hover:border-accent transition-colors overflow-hidden">
          {piece.data.image && (
            <img src={piece.data.image} alt={piece.data.title} class="w-full aspect-[4/3] object-cover" />
          )}
          <div class="p-4">
            <h3 class="text-lg font-semibold group-hover:text-accent transition-colors">{piece.data.title}</h3>
            {piece.data.description && (
              <p class="mt-1 text-sm text-text-secondary">{piece.data.description}</p>
            )}
            {piece.data.medium && (
              <p class="mt-2 text-xs text-text-muted">{piece.data.medium}</p>
            )}
          </div>
        </a>
      ))}
    </div>
  )}
</BaseLayout>
