---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const base = import.meta.env.BASE_URL.replace(/\/$/, '');

const photos = (await getCollection('photography', ({ data }) => data.published))
  .sort((a, b) => (b.data.date ?? '').localeCompare(a.data.date ?? ''));
---

<BaseLayout title="Photography ‚Äî AnEvergreene Forest" description="Photographs from the Forest and beyond.">
  <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

    <header class="mb-10">
      <h1 class="text-3xl font-bold text-text mb-2">Photography</h1>
      <p class="text-text-muted">Light caught in passing. Moments from the Forest and beyond.</p>
    </header>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {photos.map((photo) => (
        <article class="group rounded-xl overflow-hidden border border-border bg-surface hover:border-accent/50 transition-all hover:-translate-y-0.5">
          <div class="aspect-[4/3] overflow-hidden">
            <img
              src={`${base}${photo.data.image}`}
              alt={photo.data.title}
              class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
              loading="lazy"
            />
          </div>
          <div class="p-4">
            <h2 class="font-semibold text-text mb-1">{photo.data.title}</h2>
            {photo.data.description && (
              <p class="text-sm text-text-muted line-clamp-2">{photo.data.description}</p>
            )}
            {photo.data.location && (
              <p class="text-xs text-text-muted/60 mt-2">üìç {photo.data.location}</p>
            )}
          </div>
        </article>
      ))}
    </div>

  </main>
</BaseLayout>
